# 人脸检测技能<a name="hilens_02_0095"></a>

## 技能描述<a name="section1695853659"></a>

面向智慧商超的人脸采集技能。本技能使用多个深度学习算法，实时分析视频流，自动抓取画面中的清晰人脸上传至您的后台系统，用于后续实现其他业务。

本技能支持：

-   判断并过滤尺寸过小、清晰度较差、角度过大等无法判断的人脸。
-   同时检测多张人脸。
-   人脸跟踪。对同一个人抓拍的人脸做去重，避免大量的重复上报。
-   根据业务需求划定区域，只抓取固定区域内的人脸。

使用时需要提供您的业务RESTful接口和RTSP视频地址，最大支持10路网络摄像头接入，并按照接入的路数进行收费。

摄像头部署建议请参见[摄像头部署](#section18907148151)。

技能配置项请参见[运行时配置参数](#section67473231359)。

技能接口设计请参见[技能结果上传接口](#section15401255125519)。

## 基本信息<a name="section1377419551229"></a>

人脸检测技能的基本信息如[表1](#table633415157410)所示。

**表 1**  技能参数说明

<a name="table633415157410"></a>
<table><thead align="left"><tr id="row3334131518419"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p633412151415"><a name="p633412151415"></a><a name="p633412151415"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p633431516420"><a name="p633431516420"></a><a name="p633431516420"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row4334715244"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p338214331914"><a name="p338214331914"></a><a name="p338214331914"></a>技能名称</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p53821538199"><a name="p53821538199"></a><a name="p53821538199"></a>人脸检测</p>
</td>
</tr>
<tr id="row153343157416"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p123821036191"><a name="p123821036191"></a><a name="p123821036191"></a>技能版本</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p10382938197"><a name="p10382938197"></a><a name="p10382938197"></a>1.0.9</p>
</td>
</tr>
<tr id="row1333414153414"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p838212315195"><a name="p838212315195"></a><a name="p838212315195"></a>适用芯片</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p1038293131915"><a name="p1038293131915"></a><a name="p1038293131915"></a>Ascend 310</p>
</td>
</tr>
<tr id="row173349150411"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p9382163141911"><a name="p9382163141911"></a><a name="p9382163141911"></a>OS平台</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p2038212391917"><a name="p2038212391917"></a><a name="p2038212391917"></a>Linux</p>
</td>
</tr>
<tr id="row533411157417"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p23821335199"><a name="p23821335199"></a><a name="p23821335199"></a>应用场景</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p1038212311197"><a name="p1038212311197"></a><a name="p1038212311197"></a>商超</p>
</td>
</tr>
<tr id="row12334815745"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p83821935198"><a name="p83821935198"></a><a name="p83821935198"></a>支持固件版本</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p638213321920"><a name="p638213321920"></a><a name="p638213321920"></a>HiLens Framework 1.0.0及以上，DDK887/DDK893</p>
</td>
</tr>
<tr id="row23346151349"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p16382438198"><a name="p16382438198"></a><a name="p16382438198"></a>最大路数</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p14382430192"><a name="p14382430192"></a><a name="p14382430192"></a>最多10路</p>
</td>
</tr>
<tr id="row11893357946"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p153821313196"><a name="p153821313196"></a><a name="p153821313196"></a>视频流传输协议</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p33824314199"><a name="p33824314199"></a><a name="p33824314199"></a>RTSP</p>
</td>
</tr>
<tr id="row1311713015517"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p1038283131913"><a name="p1038283131913"></a><a name="p1038283131913"></a>输入方式</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p138215331918"><a name="p138215331918"></a><a name="p138215331918"></a>外接IPC摄像头</p>
</td>
</tr>
<tr id="row633102257"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p153821734198"><a name="p153821734198"></a><a name="p153821734198"></a>输出方式</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p10382332194"><a name="p10382332194"></a><a name="p10382332194"></a>POST</p>
</td>
</tr>
</tbody>
</table>

## 摄像头部署<a name="section18907148151"></a>

摄像头的架设会影响人脸检测模型的准确率。在实际架设中，尽量保证拍摄画面清晰，光照充足，人脸较正，无遮挡，比如前边的人脸容易挡住后边的人脸。监控视频场景下尽量保证拍摄的画面能拍到更多的正脸。

**摄像头参数基本设置**

不同品牌的摄像头都有一些基本的视频设置，例如分辨率、帧率和码率等，参数要求如[表2](#table787920252371)所示。

**表 2**  摄像头参数设置要求

<a name="table787920252371"></a>
<table><thead align="left"><tr id="row16879525113713"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p3879182593715"><a name="p3879182593715"></a><a name="p3879182593715"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p1787912553715"><a name="p1787912553715"></a><a name="p1787912553715"></a>要求</p>
</th>
</tr>
</thead>
<tbody><tr id="row118796256375"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p787912563715"><a name="p787912563715"></a><a name="p787912563715"></a><strong id="b539850103716"><a name="b539850103716"></a><a name="b539850103716"></a>分辨率</strong></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p5879172519372"><a name="p5879172519372"></a><a name="p5879172519372"></a>不低于720P，若需要做人脸识别和去重不低于1080P，不高于4K（3840*2160）。</p>
</td>
</tr>
<tr id="row1587972533712"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p687912255377"><a name="p687912255377"></a><a name="p687912255377"></a><strong id="b116741159163713"><a name="b116741159163713"></a><a name="b116741159163713"></a>帧率</strong></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p88797256373"><a name="p88797256373"></a><a name="p88797256373"></a>不高于25fps，不低于15fps，建议值20fps。</p>
</td>
</tr>
<tr id="row187982523716"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p128798256372"><a name="p128798256372"></a><a name="p128798256372"></a><strong id="b8443311143811"><a name="b8443311143811"></a><a name="b8443311143811"></a>码率</strong></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p1187922513378"><a name="p1187922513378"></a><a name="p1187922513378"></a>720P建议设为4096Kbps~6144Kbps左右，1080P建议设为6144Kpbs~8192Kbps，更高分辨率可设置更高码率。</p>
</td>
</tr>
<tr id="row1887902563710"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p15879202543712"><a name="p15879202543712"></a><a name="p15879202543712"></a><strong id="b136551722183817"><a name="b136551722183817"></a><a name="b136551722183817"></a>视频编码</strong></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p3879102553711"><a name="p3879102553711"></a><a name="p3879102553711"></a>若支持H.265，设置为H.265。</p>
</td>
</tr>
<tr id="row087912510377"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p3879132516379"><a name="p3879132516379"></a><a name="p3879132516379"></a><strong id="b4871153118384"><a name="b4871153118384"></a><a name="b4871153118384"></a>日夜切换</strong></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p187912512378"><a name="p187912512378"></a><a name="p187912512378"></a>关闭夜间自动切换红外模式，暂不支持抓取红外模式下的人脸。</p>
</td>
</tr>
<tr id="row1687912513714"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p1587992514373"><a name="p1587992514373"></a><a name="p1587992514373"></a><strong id="b171671841113817"><a name="b171671841113817"></a><a name="b171671841113817"></a>宽动态</strong></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p887982513712"><a name="p887982513712"></a><a name="p887982513712"></a>关闭宽动态。普通摄像头的宽动态无法到达专业相机的效果，人的走动速度较快时存在运动模糊，应关闭宽动态设置。</p>
</td>
</tr>
</tbody>
</table>

**人脸角度要求**

人脸角度按照三个维度定义：人脸抬头低头角度（pitch），正面人脸旋转角度（roll），前后转头偏转角度（yaw）。人脸检测算法对三个空间维度都有限制。检测模型根据三个维度做姿态评估以后，将检测到的人脸图片发送出来。如果摄像头安装角度不合适，拍摄的画面容易将一些正脸误检为侧脸，在安装好摄像头以后，需要安装人员在现场走进画面实际测试，确认拍摄的人脸画面不产生过大的角度，不会造成算法无法抓到人脸。

请保证人在正常行走中，视频中人脸成像前后转头偏转角度“yaw“不超过45°（即摄像头无斜拍），人脸抬头低头角度“pitch“不超过30°（即摄像头架设俯视角合理），人脸旋转角度“roll“不超过20°（即摄像头两侧水平，无倾斜角），满足上述正脸姿态要求。

**人脸大小要求**

对于不可调焦距的摄像头，摄像头应安装在距离抓拍点较近处，使得人脸在画面中的像素大小不小于30px\*30px。摄像头架设建议如下。

架设高度：2m-2.5m

监控距离：5m-6m

监控宽度：2m-3m

俯视角度：15°左右

对于可调焦距摄像头，应调节焦段使得人脸像素大小满足大于30px\*30px的要求。

如果抓取人脸后还需发送给FRS服务，请保证人脸像素大小大于80px\*80px，对应设置[运行时配置参数](#section67473231359)中的“cropSizeMin“参数值为“80“。

**光照要求**

光照条件要求需要满足以下几项：

-   行人正脸光照强度较好，光线过强和过弱都不太合适。

    如果不满足此要求，例如在夜晚或光线不足的白天等环境，会使得采集人脸图像曝光不足，获取的人脸画面偏暗、噪点偏多，导致发送至FRS服务的图片正确率偏低。

-   人脸两侧光照强度差值不宜过大。

    如果不满足此要求，即左右侧光照强度如果差异过大，采集的人脸图像有“阴阳脸“现象（半张脸暗，半张脸亮）。

-   行人背面光照强度<正面光照强度\* 2。

    如果不满足此要求，即行人背面光照强度远大于正面光照强度，采集人脸图像有严重“背光“现象，最终导致人脸曝光不足，五官细节丢失。

-   室外安装摄像头不宜正对着太阳光，会导致人脸拍摄光照不均，造成人脸反光。

    如果不满足此要求，会导致光线太强和太弱，人脸五官细节都会丢失。

-   室外摄像头安装，不宜选择背阴严重或者有遮挡物挡住光线的地方架设。

    如果不满足此要求，会导致光线太强和太弱，人脸五官细节都会丢失。


如果现场的光线不满足上述要求，则需要通过强光抑制或补光来优化现场的光照条件。强光抑制可以改善“阴阳脸“、“背光“现象，即通过减弱侧面光照来改善光照条件。补光则可以通过增加额外光源的方式改善光照条件，提高人脸图像的采集效果；主要通过普通射灯、白炽灯等在不影响装修、路人视觉效果的情况下提高人脸的光照度，消除“阴阳脸“。

**周围环境要求**

-   镜头前方不要有遮挡的障碍物，容易挡住人脸，造成漏检。
-   不要将摄像头架在房子遮阴的挡板下，会造成光照过暗，人脸完全看不清。
-   室内安装摄像头，部署在楼道里需要注意光照，楼道里灯光明暗交替变化过快，摄像头拍摄时获取的画面可能会偏暗，检测到的人脸发送给FRS后，正确率较低。比如，走廊较长，楼道光照较暗，人距离摄像头较远时，检测出的人脸很模糊。
-   室外安装摄像头，需要注意雨雪的影响，避免在露天下布置，雨水或者雪将摄像头的镜头盖住，造成拍摄画面模糊不清。

## 运行时配置参数<a name="section67473231359"></a>

技能在运行时，需要[添加运行时配置](添加运行时配置.md)。配置完成后，参数会从华为HiLens云侧下发到端侧设备。

-   **配置参数说明**

    技能相关配置参数设计如[表3](#table165162714399)所示。

    **表 3**  运行时配置参数

    <a name="table165162714399"></a>
    <table><thead align="left"><tr id="row67632714392"><th class="cellrowborder" valign="top" width="30.620000000000005%" id="mcps1.2.5.1.1"><p id="p376192715392"><a name="p376192715392"></a><a name="p376192715392"></a>名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="12.23%" id="mcps1.2.5.1.2"><p id="p57622714395"><a name="p57622714395"></a><a name="p57622714395"></a>是否必选</p>
    </th>
    <th class="cellrowborder" valign="top" width="16.33%" id="mcps1.2.5.1.3"><p id="p976827163914"><a name="p976827163914"></a><a name="p976827163914"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="40.82%" id="mcps1.2.5.1.4"><p id="p157642719395"><a name="p157642719395"></a><a name="p157642719395"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row181581519114"><td class="cellrowborder" valign="top" width="30.620000000000005%" headers="mcps1.2.5.1.1 "><p id="p181581758113"><a name="p181581758113"></a><a name="p181581758113"></a>logLevel</p>
    </td>
    <td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.2 "><p id="p1215814521119"><a name="p1215814521119"></a><a name="p1215814521119"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.33%" headers="mcps1.2.5.1.3 "><p id="p6158115101110"><a name="p6158115101110"></a><a name="p6158115101110"></a>Enum</p>
    </td>
    <td class="cellrowborder" valign="top" width="40.82%" headers="mcps1.2.5.1.4 "><p id="p1215910541116"><a name="p1215910541116"></a><a name="p1215910541116"></a>日志级别，包括INFO，DEBUG，WARNING和ERROR。建议设置为INFO。</p>
    </td>
    </tr>
    <tr id="row310714016111"><td class="cellrowborder" valign="top" width="30.620000000000005%" headers="mcps1.2.5.1.1 "><p id="p11107240191114"><a name="p11107240191114"></a><a name="p11107240191114"></a>keep_running</p>
    </td>
    <td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.2 "><p id="p11107154011117"><a name="p11107154011117"></a><a name="p11107154011117"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.33%" headers="mcps1.2.5.1.3 "><p id="p210734061112"><a name="p210734061112"></a><a name="p210734061112"></a>Int</p>
    </td>
    <td class="cellrowborder" valign="top" width="40.82%" headers="mcps1.2.5.1.4 "><p id="p19107104012118"><a name="p19107104012118"></a><a name="p19107104012118"></a>当技能崩溃是否自动拉起技能并持续运行。此项配置在1.1.0及以后版本起作用。</p>
    </td>
    </tr>
    <tr id="row476192793915"><td class="cellrowborder" valign="top" width="30.620000000000005%" headers="mcps1.2.5.1.1 "><p id="p476527113911"><a name="p476527113911"></a><a name="p476527113911"></a>multi_camera</p>
    </td>
    <td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.2 "><p id="p876142713920"><a name="p876142713920"></a><a name="p876142713920"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="16.33%" headers="mcps1.2.5.1.3 "><p id="p20761273395"><a name="p20761273395"></a><a name="p20761273395"></a>List</p>
    </td>
    <td class="cellrowborder" valign="top" width="40.82%" headers="mcps1.2.5.1.4 "><p id="p1976152715396"><a name="p1976152715396"></a><a name="p1976152715396"></a>一个设备上多路视频的技能参数，详情请参见<a href="#table4476192818405">表4</a>。</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 4**  视频参数说明

    <a name="table4476192818405"></a>
    <table><thead align="left"><tr id="row6517328114017"><th class="cellrowborder" valign="top" width="28.57%" id="mcps1.2.5.1.1"><p id="p551732814017"><a name="p551732814017"></a><a name="p551732814017"></a>名称</p>
    </th>
    <th class="cellrowborder" valign="top" width="8.61%" id="mcps1.2.5.1.2"><p id="p175176286401"><a name="p175176286401"></a><a name="p175176286401"></a>是否必选</p>
    </th>
    <th class="cellrowborder" valign="top" width="11.799999999999999%" id="mcps1.2.5.1.3"><p id="p55174288409"><a name="p55174288409"></a><a name="p55174288409"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="51.019999999999996%" id="mcps1.2.5.1.4"><p id="p4517172824011"><a name="p4517172824011"></a><a name="p4517172824011"></a>说明</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row8517828194010"><td class="cellrowborder" valign="top" width="28.57%" headers="mcps1.2.5.1.1 "><p id="p1351722817402"><a name="p1351722817402"></a><a name="p1351722817402"></a>camera_names</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.61%" headers="mcps1.2.5.1.2 "><p id="p7517328114011"><a name="p7517328114011"></a><a name="p7517328114011"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="11.799999999999999%" headers="mcps1.2.5.1.3 "><p id="p10517628144011"><a name="p10517628144011"></a><a name="p10517628144011"></a>List</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.019999999999996%" headers="mcps1.2.5.1.4 "><p id="p25173287402"><a name="p25173287402"></a><a name="p25173287402"></a>摄像头名称。可配置多个名称，表示多个摄像头采用同样的技能配置。</p>
    </td>
    </tr>
    <tr id="row9517132814404"><td class="cellrowborder" valign="top" width="28.57%" headers="mcps1.2.5.1.1 "><p id="p165171328174017"><a name="p165171328174017"></a><a name="p165171328174017"></a>sendOriImgFlag</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.61%" headers="mcps1.2.5.1.2 "><p id="p12517928124019"><a name="p12517928124019"></a><a name="p12517928124019"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="11.799999999999999%" headers="mcps1.2.5.1.3 "><p id="p3517162804016"><a name="p3517162804016"></a><a name="p3517162804016"></a>Int</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.019999999999996%" headers="mcps1.2.5.1.4 "><p id="p13517132817403"><a name="p13517132817403"></a><a name="p13517132817403"></a>是否发送人脸背景原始图,默认值：0。</p>
    <p id="p135171284409"><a name="p135171284409"></a><a name="p135171284409"></a>0：表示不发送</p>
    <p id="p1351712894015"><a name="p1351712894015"></a><a name="p1351712894015"></a>1：表示发送</p>
    </td>
    </tr>
    <tr id="row175172280401"><td class="cellrowborder" valign="top" width="28.57%" headers="mcps1.2.5.1.1 "><p id="p95171328154015"><a name="p95171328154015"></a><a name="p95171328154015"></a>sendRepeatFaceFlag</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.61%" headers="mcps1.2.5.1.2 "><p id="p851782854018"><a name="p851782854018"></a><a name="p851782854018"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="11.799999999999999%" headers="mcps1.2.5.1.3 "><p id="p15517102820405"><a name="p15517102820405"></a><a name="p15517102820405"></a>Int</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.019999999999996%" headers="mcps1.2.5.1.4 "><p id="p551772834015"><a name="p551772834015"></a><a name="p551772834015"></a>是否重复发送清晰人脸图，开关打开后，同一个人只要显示更清晰的人脸会重复发送, 默认值：0。</p>
    <p id="p651715282401"><a name="p651715282401"></a><a name="p651715282401"></a>0：表示不发送</p>
    <p id="p13517162814408"><a name="p13517162814408"></a><a name="p13517162814408"></a>1：表示发送</p>
    </td>
    </tr>
    <tr id="row4517228174019"><td class="cellrowborder" valign="top" width="28.57%" headers="mcps1.2.5.1.1 "><p id="p195171284402"><a name="p195171284402"></a><a name="p195171284402"></a>sendOriImgCompressionRatio</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.61%" headers="mcps1.2.5.1.2 "><p id="p105176289400"><a name="p105176289400"></a><a name="p105176289400"></a>否</p>
    </td>
    <td class="cellrowborder" valign="top" width="11.799999999999999%" headers="mcps1.2.5.1.3 "><p id="p1951782864012"><a name="p1951782864012"></a><a name="p1951782864012"></a>Int</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.019999999999996%" headers="mcps1.2.5.1.4 "><p id="p175172282402"><a name="p175172282402"></a><a name="p175172282402"></a>原始图jpeg压缩百分比，默认值为90,表示图片压缩比90%，取值范围[1 100]。</p>
    </td>
    </tr>
    <tr id="row7517428124019"><td class="cellrowborder" valign="top" width="28.57%" headers="mcps1.2.5.1.1 "><p id="p14517202884011"><a name="p14517202884011"></a><a name="p14517202884011"></a>cropSizeMax</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.61%" headers="mcps1.2.5.1.2 "><p id="p145177288404"><a name="p145177288404"></a><a name="p145177288404"></a>否</p>
    </td>
    <td class="cellrowborder" valign="top" width="11.799999999999999%" headers="mcps1.2.5.1.3 "><p id="p185174285408"><a name="p185174285408"></a><a name="p185174285408"></a>Int</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.019999999999996%" headers="mcps1.2.5.1.4 "><p id="p7517328164011"><a name="p7517328164011"></a><a name="p7517328164011"></a>发送人脸图片长宽的最大像素，默认值400。</p>
    </td>
    </tr>
    <tr id="row9517172810402"><td class="cellrowborder" valign="top" width="28.57%" headers="mcps1.2.5.1.1 "><p id="p651717288402"><a name="p651717288402"></a><a name="p651717288402"></a>cropSizeMin</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.61%" headers="mcps1.2.5.1.2 "><p id="p19517122874018"><a name="p19517122874018"></a><a name="p19517122874018"></a>否</p>
    </td>
    <td class="cellrowborder" valign="top" width="11.799999999999999%" headers="mcps1.2.5.1.3 "><p id="p25171728124015"><a name="p25171728124015"></a><a name="p25171728124015"></a>Int</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.019999999999996%" headers="mcps1.2.5.1.4 "><p id="p1517112834018"><a name="p1517112834018"></a><a name="p1517112834018"></a>发送人脸图片长宽的最小像素，默认值80。</p>
    </td>
    </tr>
    <tr id="row751717280408"><td class="cellrowborder" valign="top" width="28.57%" headers="mcps1.2.5.1.1 "><p id="p115171428124015"><a name="p115171428124015"></a><a name="p115171428124015"></a>roi</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.61%" headers="mcps1.2.5.1.2 "><p id="p115173287403"><a name="p115173287403"></a><a name="p115173287403"></a>否</p>
    </td>
    <td class="cellrowborder" valign="top" width="11.799999999999999%" headers="mcps1.2.5.1.3 "><p id="p13517182816406"><a name="p13517182816406"></a><a name="p13517182816406"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.019999999999996%" headers="mcps1.2.5.1.4 "><p id="p16517152819404"><a name="p16517152819404"></a><a name="p16517152819404"></a>检测区域配置。区域的设置由Polygon开头，其后依次为区域的坐标(按顺时针排列的x，y坐标)。默认值为Polygon 0 0 0 0，表示检测整个画面。</p>
    </td>
    </tr>
    <tr id="row769117892917"><td class="cellrowborder" valign="top" width="28.57%" headers="mcps1.2.5.1.1 "><p id="p5691198172915"><a name="p5691198172915"></a><a name="p5691198172915"></a>sendUrl</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.61%" headers="mcps1.2.5.1.2 "><p id="p5691387297"><a name="p5691387297"></a><a name="p5691387297"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="11.799999999999999%" headers="mcps1.2.5.1.3 "><p id="p1869220832910"><a name="p1869220832910"></a><a name="p1869220832910"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.019999999999996%" headers="mcps1.2.5.1.4 "><p id="p196921581294"><a name="p196921581294"></a><a name="p196921581294"></a>发送技能消息POST请求的URL地址。</p>
    </td>
    </tr>
    <tr id="row151752894012"><td class="cellrowborder" valign="top" width="28.57%" headers="mcps1.2.5.1.1 "><p id="p65176285403"><a name="p65176285403"></a><a name="p65176285403"></a>faceQualityThreshold</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.61%" headers="mcps1.2.5.1.2 "><p id="p1517228204013"><a name="p1517228204013"></a><a name="p1517228204013"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="11.799999999999999%" headers="mcps1.2.5.1.3 "><p id="p16518628114018"><a name="p16518628114018"></a><a name="p16518628114018"></a>Float</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.019999999999996%" headers="mcps1.2.5.1.4 "><p id="p8518132810408"><a name="p8518132810408"></a><a name="p8518132810408"></a>人脸清晰度阈值。清晰度大于此值的人脸才发送。取值范围[0.0, 1.0]，默认值0.38。</p>
    </td>
    </tr>
    <tr id="row8518132804019"><td class="cellrowborder" valign="top" width="28.57%" headers="mcps1.2.5.1.1 "><p id="p4518102844012"><a name="p4518102844012"></a><a name="p4518102844012"></a>centerMode</p>
    </td>
    <td class="cellrowborder" valign="top" width="8.61%" headers="mcps1.2.5.1.2 "><p id="p165183285409"><a name="p165183285409"></a><a name="p165183285409"></a>否</p>
    </td>
    <td class="cellrowborder" valign="top" width="11.799999999999999%" headers="mcps1.2.5.1.3 "><p id="p12518122810407"><a name="p12518122810407"></a><a name="p12518122810407"></a>Int</p>
    </td>
    <td class="cellrowborder" valign="top" width="51.019999999999996%" headers="mcps1.2.5.1.4 "><p id="p2518928164012"><a name="p2518928164012"></a><a name="p2518928164012"></a>是否只检测roi区域中的最大人脸，默认值0。</p>
    <p id="p15518428174013"><a name="p15518428174013"></a><a name="p15518428174013"></a>0：返回所有人脸。</p>
    <p id="p16518202817406"><a name="p16518202817406"></a><a name="p16518202817406"></a>1：只返回roi中最大的人脸。</p>
    </td>
    </tr>
    </tbody>
    </table>

-   **示例**

    HiLens Kit设备支持多路摄像头接入，如果要为不同的摄像头设置不同的技能配置，或者几个摄像头共用同一技能配置，则可在配置列表中给出相应的配置信息，示例如下：

    ```
    //Store001的两个摄像头pos1和pos2配置不同参数：
    { 
      "logLevel": "INFO",
      "keep_running": 1,
      "multi_camera": 
             [{
              "camera_names": ["store001_pos1"],
              "sendOriImgFlag": 0,
              "sendRepeatFaceFlag": 0,
              "sendOriImgCompressionRatio": 90,
              "cropSizeMax": 400,
              "cropSizeMin": 120,
              "roi": "Polygon 0 0 0 0",
              "sendUrl": "https://abc.company.com/face",
              "faceQualityThreshold": 0.45,
              "centerMode": 0
             },
             {
             "camera_names": ["store001_pos2"],
             "sendOriImgFlag": 1,
             "sendRepeatFaceFlag": 1,
             "sendOriImgCompressionRatio": 100,
             "cropSizeMax": 300,
             "cropSizeMin": 80,
             "roi": "Polygon 0 0 0 0",
             "sendUrl": "https://abc.company.com/face",
             "faceQualityThreshold": 0.55,
             "centerMode": 0
              }]
    }
    //Store002的两个摄像头pos1和pos2配置相同参数：
    { 
      "logLevel": "INFO",
      "keep_running": 1,
      "multi_camera": 
             [{
             "camera_names": ["store002_pos1","store002_pos2"],
             "sendOriImgFlag": 0,
             "sendRepeatFaceFlag": 0,
             "sendOriImgCompressionRatio": 90,
             "cropSizeMax": 400,
             "cropSizeMin": 120,
             "roi": "Polygon 0 0 0 0",
             "sendUrl": "https://abc.company.com/face"
             "faceQualityThreshold": 0.55,
             "centerMode": 0
             }]
    }
    ```


## 技能结果上传接口<a name="section15401255125519"></a>

-   **请求消息**

    推理结果将以HTTPS POST请求方法推送到应用系统server的指定URL地址。

    **POST \{sendUrl\}**

    其中**sendUrl**在[技能运行时配置](添加运行时配置.md)中设置。

    -   请求消息头

        技能以json形式返回推理结果，因此消息头**Content-Type**类型为“application/json“，参数说明如[表5](#table1825614291229)所示。

        **表 5**  请求消息头参数说明

        <a name="table1825614291229"></a>
        <table><thead align="left"><tr id="row32801929928"><th class="cellrowborder" valign="top" width="19.59%" id="mcps1.2.5.1.1"><p id="p328016298216"><a name="p328016298216"></a><a name="p328016298216"></a>名称</p>
        </th>
        <th class="cellrowborder" valign="top" width="26.8%" id="mcps1.2.5.1.2"><p id="p82801229626"><a name="p82801229626"></a><a name="p82801229626"></a>描述</p>
        </th>
        <th class="cellrowborder" valign="top" width="19.59%" id="mcps1.2.5.1.3"><p id="p328013292211"><a name="p328013292211"></a><a name="p328013292211"></a>是否必选</p>
        </th>
        <th class="cellrowborder" valign="top" width="34.02%" id="mcps1.2.5.1.4"><p id="p62808291213"><a name="p62808291213"></a><a name="p62808291213"></a>示例</p>
        </th>
        </tr>
        </thead>
        <tbody><tr id="row4280172911217"><td class="cellrowborder" valign="top" width="19.59%" headers="mcps1.2.5.1.1 "><p id="p92802291024"><a name="p92802291024"></a><a name="p92802291024"></a>Content-Type</p>
        </td>
        <td class="cellrowborder" valign="top" width="26.8%" headers="mcps1.2.5.1.2 "><p id="p1428002912211"><a name="p1428002912211"></a><a name="p1428002912211"></a>消息体的类型（格式）</p>
        </td>
        <td class="cellrowborder" valign="top" width="19.59%" headers="mcps1.2.5.1.3 "><p id="p2028018291228"><a name="p2028018291228"></a><a name="p2028018291228"></a>是</p>
        </td>
        <td class="cellrowborder" valign="top" width="34.02%" headers="mcps1.2.5.1.4 "><p id="p1528015292022"><a name="p1528015292022"></a><a name="p1528015292022"></a>application/json。</p>
        </td>
        </tr>
        </tbody>
        </table>

    -   公共消息体

        华为HiLens 公共消息体包含了技能的公共消息内容，如[表6](#table153034227414)所示。

        **表 6**  公共消息体参数说明

        <a name="table153034227414"></a>
        <table><thead align="left"><tr id="row19336822746"><th class="cellrowborder" valign="top" width="27.27%" id="mcps1.2.4.1.1"><p id="p11336172216415"><a name="p11336172216415"></a><a name="p11336172216415"></a>名称</p>
        </th>
        <th class="cellrowborder" valign="top" width="15.15%" id="mcps1.2.4.1.2"><p id="p15336622048"><a name="p15336622048"></a><a name="p15336622048"></a>类型</p>
        </th>
        <th class="cellrowborder" valign="top" width="57.58%" id="mcps1.2.4.1.3"><p id="p93361221743"><a name="p93361221743"></a><a name="p93361221743"></a>说明</p>
        </th>
        </tr>
        </thead>
        <tbody><tr id="row14336122217419"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p833617221249"><a name="p833617221249"></a><a name="p833617221249"></a>msg_type</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p19336152214418"><a name="p19336152214418"></a><a name="p19336152214418"></a>String</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p1833632218411"><a name="p1833632218411"></a><a name="p1833632218411"></a>技能类型，为face_detection_result。</p>
        </td>
        </tr>
        <tr id="row63368221041"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p193364221547"><a name="p193364221547"></a><a name="p193364221547"></a>cam_name</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p143366224415"><a name="p143366224415"></a><a name="p143366224415"></a>String</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p1333682210411"><a name="p1333682210411"></a><a name="p1333682210411"></a>摄像头名称。</p>
        </td>
        </tr>
        <tr id="row1633617228416"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p23361228417"><a name="p23361228417"></a><a name="p23361228417"></a>skill_id</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p13361822943"><a name="p13361822943"></a><a name="p13361822943"></a>String</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p1133612227417"><a name="p1133612227417"></a><a name="p1133612227417"></a>技能ID。</p>
        </td>
        </tr>
        </tbody>
        </table>

    -   技能消息体

        人脸检测的json消息体如[表7](#table1231242113615)所示：

        **表 7**  技能消息体参数说明

        <a name="table1231242113615"></a>
        <table><thead align="left"><tr id="row1935617211367"><th class="cellrowborder" valign="top" width="27.27%" id="mcps1.2.4.1.1"><p id="p73561211365"><a name="p73561211365"></a><a name="p73561211365"></a>名称</p>
        </th>
        <th class="cellrowborder" valign="top" width="15.15%" id="mcps1.2.4.1.2"><p id="p173569211264"><a name="p173569211264"></a><a name="p173569211264"></a>类型</p>
        </th>
        <th class="cellrowborder" valign="top" width="57.58%" id="mcps1.2.4.1.3"><p id="p12356122116618"><a name="p12356122116618"></a><a name="p12356122116618"></a>说明</p>
        </th>
        </tr>
        </thead>
        <tbody><tr id="row153571721764"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p53574211269"><a name="p53574211269"></a><a name="p53574211269"></a>face_id</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p735719217615"><a name="p735719217615"></a><a name="p735719217615"></a>String</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p4357122114610"><a name="p4357122114610"></a><a name="p4357122114610"></a>人脸图UUID。</p>
        </td>
        </tr>
        <tr id="row435718214618"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p83571821368"><a name="p83571821368"></a><a name="p83571821368"></a>track_id</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p183571121865"><a name="p183571121865"></a><a name="p183571121865"></a>Uint64</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p635714213612"><a name="p635714213612"></a><a name="p635714213612"></a>人脸的跟踪标记，相同的track_id表示同一个人脸。</p>
        </td>
        </tr>
        <tr id="row1235715211362"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p7357152118610"><a name="p7357152118610"></a><a name="p7357152118610"></a>ori_img_id</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p135782111617"><a name="p135782111617"></a><a name="p135782111617"></a>String</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p1535720211267"><a name="p1535720211267"></a><a name="p1535720211267"></a>人脸背景原始图UUID。</p>
        </td>
        </tr>
        <tr id="row9357621568"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p635718212617"><a name="p635718212617"></a><a name="p635718212617"></a>time</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p1035732110618"><a name="p1035732110618"></a><a name="p1035732110618"></a>Uint64</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p73574218610"><a name="p73574218610"></a><a name="p73574218610"></a>图片解码时间的时间戳，单位为秒。</p>
        </td>
        </tr>
        <tr id="row1535712117610"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p035710213618"><a name="p035710213618"></a><a name="p035710213618"></a>bbox</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p1135742120618"><a name="p1135742120618"></a><a name="p1135742120618"></a>Object</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p635719211769"><a name="p635719211769"></a><a name="p635719211769"></a>人脸图在背景图中的位置信息。位置信息参数请参见<a href="#table73614281719">表8</a>。</p>
        </td>
        </tr>
        <tr id="row3357121362"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p635714215612"><a name="p635714215612"></a><a name="p635714215612"></a>clarity</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p18357421367"><a name="p18357421367"></a><a name="p18357421367"></a>Float</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p18357202119615"><a name="p18357202119615"></a><a name="p18357202119615"></a>人脸清晰度，范围[0,1]。</p>
        </td>
        </tr>
        <tr id="row19357112119619"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p1935719211768"><a name="p1935719211768"></a><a name="p1935719211768"></a>face_image</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p1135711216610"><a name="p1135711216610"></a><a name="p1135711216610"></a>String</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p3357142110617"><a name="p3357142110617"></a><a name="p3357142110617"></a>人脸图BASE64编码结果。</p>
        </td>
        </tr>
        <tr id="row135710217615"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p23577218619"><a name="p23577218619"></a><a name="p23577218619"></a>ori_image</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p83571221261"><a name="p83571221261"></a><a name="p83571221261"></a>String</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p335714219617"><a name="p335714219617"></a><a name="p335714219617"></a>原始图BASE64编码结果，若配置不发送原始图，则无该字段。</p>
        </td>
        </tr>
        </tbody>
        </table>

        **表 8**  bbox位置信息参数说明

        <a name="table73614281719"></a>
        <table><thead align="left"><tr id="row658152813711"><th class="cellrowborder" valign="top" width="27.27%" id="mcps1.2.4.1.1"><p id="p1958202817718"><a name="p1958202817718"></a><a name="p1958202817718"></a>字段</p>
        </th>
        <th class="cellrowborder" valign="top" width="15.15%" id="mcps1.2.4.1.2"><p id="p205892816718"><a name="p205892816718"></a><a name="p205892816718"></a>类型</p>
        </th>
        <th class="cellrowborder" valign="top" width="57.58%" id="mcps1.2.4.1.3"><p id="p35812281714"><a name="p35812281714"></a><a name="p35812281714"></a>说明</p>
        </th>
        </tr>
        </thead>
        <tbody><tr id="row12581128378"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p12582286718"><a name="p12582286718"></a><a name="p12582286718"></a>x</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p058628676"><a name="p058628676"></a><a name="p058628676"></a>Int</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p5588282076"><a name="p5588282076"></a><a name="p5588282076"></a>人脸图左上角顶点x坐标值。</p>
        </td>
        </tr>
        <tr id="row135815282711"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p35802816710"><a name="p35802816710"></a><a name="p35802816710"></a>y</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p1858192815710"><a name="p1858192815710"></a><a name="p1858192815710"></a>Int</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p1583281717"><a name="p1583281717"></a><a name="p1583281717"></a>人脸图左上角顶点y坐标值。</p>
        </td>
        </tr>
        <tr id="row12594289718"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p175915286720"><a name="p175915286720"></a><a name="p175915286720"></a>h</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p4598281576"><a name="p4598281576"></a><a name="p4598281576"></a>Int</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p45919281475"><a name="p45919281475"></a><a name="p45919281475"></a>人脸图高。</p>
        </td>
        </tr>
        <tr id="row65919281172"><td class="cellrowborder" valign="top" width="27.27%" headers="mcps1.2.4.1.1 "><p id="p259162819714"><a name="p259162819714"></a><a name="p259162819714"></a>w</p>
        </td>
        <td class="cellrowborder" valign="top" width="15.15%" headers="mcps1.2.4.1.2 "><p id="p135902819715"><a name="p135902819715"></a><a name="p135902819715"></a>Int</p>
        </td>
        <td class="cellrowborder" valign="top" width="57.58%" headers="mcps1.2.4.1.3 "><p id="p65962816718"><a name="p65962816718"></a><a name="p65962816718"></a>人脸图宽。</p>
        </td>
        </tr>
        </tbody>
        </table>

        人脸检测的json消息体示例如下：

        ```
        { 
          "msg_type": "face_detection_result",
          "cam_name": "store001_pos2",
          "skill_id": "f5c526eb6c51440c8a0ee5e3cc65f23c",
          "face_id": "0DD1BEA6-634B-11E8-8B0B-407D0FAD9218",
          "track_id": 1,
          "ori_img_id": "0DD1BF0A-634B-11E8-8B0B-407D0FAD9218",
          "time": 1527603463,
          "bbox ": {
                     "x": 32,
                     "y": 379,
                     "w": 49,
                     "h": 65
                     },
           "clarity": 0.55,
           "face_image": "4AAQSkZJRgABAQAAAQABAAD/2wBDAAIBAQE...",
           "ori_image": "4AAQSkZJRgABAQAAAQABAAD/2wBDAAIBAQE...",
         }
        ```


-   **响应消息**
    -   响应消息头

        响应消息头由服务器端\(应用系统\)收到请求消息后返回。

        响应消息头可包含如下两部分。

        -   一个HTTP状态代码，从2xx成功代码到4xx或5xx错误代码。或者可以返回服务定义的状态码。
        -   附加响应头字段，如支持请求的响应所需，如Content-type响应消息头。

        详细的公共响应消息头参数说明如[表9](#table93081840181617)所示。

        **表 9**  公共响应消息头参数说明

        <a name="table93081840181617"></a>
        <table><thead align="left"><tr id="row1530744041619"><th class="cellrowborder" valign="top" width="23%" id="mcps1.2.4.1.1"><p id="p8307184081614"><a name="p8307184081614"></a><a name="p8307184081614"></a>名称</p>
        </th>
        <th class="cellrowborder" valign="top" width="44%" id="mcps1.2.4.1.2"><p id="p3307040201613"><a name="p3307040201613"></a><a name="p3307040201613"></a>描述</p>
        </th>
        <th class="cellrowborder" valign="top" width="33%" id="mcps1.2.4.1.3"><p id="p930744017169"><a name="p930744017169"></a><a name="p930744017169"></a>示例</p>
        </th>
        </tr>
        </thead>
        <tbody><tr id="row73071440101617"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.4.1.1 "><p id="p330734020165"><a name="p330734020165"></a><a name="p330734020165"></a>Date</p>
        </td>
        <td class="cellrowborder" valign="top" width="44%" headers="mcps1.2.4.1.2 "><p id="p103075407169"><a name="p103075407169"></a><a name="p103075407169"></a>HTTP协议标准报头。表示消息发送的时间，时间的描述格式由rfc822定义。</p>
        </td>
        <td class="cellrowborder" valign="top" width="33%" headers="mcps1.2.4.1.3 "><p id="p630794011618"><a name="p630794011618"></a><a name="p630794011618"></a>Mon, 12 Nov 2007 15:55:01 GMT</p>
        </td>
        </tr>
        <tr id="row15308040151610"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.4.1.1 "><p id="p183071940131616"><a name="p183071940131616"></a><a name="p183071940131616"></a>Server</p>
        </td>
        <td class="cellrowborder" valign="top" width="44%" headers="mcps1.2.4.1.2 "><p id="p14308740121619"><a name="p14308740121619"></a><a name="p14308740121619"></a>HTTP协议标准报头。包含了服务器用来处理请求的软件信息。</p>
        </td>
        <td class="cellrowborder" valign="top" width="33%" headers="mcps1.2.4.1.3 "><p id="p43081940181618"><a name="p43081940181618"></a><a name="p43081940181618"></a>Apache</p>
        </td>
        </tr>
        <tr id="row12308040171610"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.4.1.1 "><p id="p133081440161619"><a name="p133081440161619"></a><a name="p133081440161619"></a>Content-Length</p>
        </td>
        <td class="cellrowborder" valign="top" width="44%" headers="mcps1.2.4.1.2 "><p id="p8308184041616"><a name="p8308184041616"></a><a name="p8308184041616"></a>HTTP协议标准报头。用于指明实体正文的长度，以字节方式存储的十进制数字来表示。</p>
        </td>
        <td class="cellrowborder" valign="top" width="33%" headers="mcps1.2.4.1.3 "><p id="p43081240141615"><a name="p43081240141615"></a><a name="p43081240141615"></a>xxx</p>
        </td>
        </tr>
        <tr id="row830844017169"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.4.1.1 "><p id="p133083406163"><a name="p133083406163"></a><a name="p133083406163"></a>Content-Type</p>
        </td>
        <td class="cellrowborder" valign="top" width="44%" headers="mcps1.2.4.1.2 "><p id="p1630884091611"><a name="p1630884091611"></a><a name="p1630884091611"></a>HTTP协议标准报头。用于指明发送给接收者的实体正文的媒体类型。</p>
        </td>
        <td class="cellrowborder" valign="top" width="33%" headers="mcps1.2.4.1.3 "><p id="p63082402166"><a name="p63082402166"></a><a name="p63082402166"></a>application/json</p>
        </td>
        </tr>
        </tbody>
        </table>

    -   响应消息体（可选）

        响应消息体通常以结构化格式（如json或xml）返回，与响应消息头中**Content-type**对应，传递除响应消息头之外的内容。



